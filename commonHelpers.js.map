{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '43953718-9ce06f0736fa41b18ed1e7ce5';\nconst perPage = 15;\n\nexport async function searchImages(query, page) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const { hits, totalHits } = response.data;\n    return { hits, total: totalHits };\n  } catch (error) {\n    console.error('Error', error);\n    throw error;\n  }\n}","\nexport function addImage(image) {\n    const galleryElement = document.querySelector('.gallery');\n    const html = `\n      <li class=\"gallery-item\">\n        <div class=\"place-for-image\">\n          <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"picture\"/>\n          </a>\n        </div>\n        <div class=\"info-text\">\n          <div class=\"description\">\n            <span class=\"bold-text\">Likes</span>\n            <span class=\"info-value\">${image.likes}</span>\n          </div>\n          <div class=\"description\">\n            <span class=\"bold-text\">Views</span>\n            <span class=\"info-value\">${image.views}</span>\n          </div>\n          <div class=\"description\">\n            <span class=\"bold-text\">Comments</span>\n            <span class=\"info-value\">${image.comments}</span>\n          </div>\n          <div class=\"description\">\n            <span class=\"bold-text\">Downloads</span>\n            <span class=\"info-value\">${image.downloads}</span>\n          </div>\n        </div>\n      </li>\n    `;\n    galleryElement.insertAdjacentHTML('beforeend', html);\n  }\n  ","import { searchImages } from './js/pixabay-api.js';\nimport { addImage } from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst loader = document.querySelector('.loader');\nconst form = document.getElementById('searchForm');\nconst galleryElement = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst endMessage = \"We're sorry, but you've reached the end of search results.\";\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet cardHeight = 0;\nlet lightbox;\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction moreButton(show) {\n  loadMoreButton.style.display = show ? 'block' : 'none';\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  searchQuery = document.getElementById('searchInput').value.trim();\n\n  if (searchQuery === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  toggleLoader(true);\n  await performSearch();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage++;\n  toggleLoader(true);\n  await performSearch();\n  smoothScroll();\n});\n\nasync function performSearch() {\n  try {\n    const { hits, total } = await searchImages(searchQuery, currentPage);\n    if (hits.length === 0) {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'Sorry, there are no more images matching your search query.',\n      });\n\n      galleryElement.innerHTML = '';\n      \n      moreButton(false);\n    } else {\n      if (currentPage === 1) {\n        galleryElement.innerHTML = '';\n        totalHits = total;\n        \n        moreButton(false);\n      }      \n        hits.forEach(image => {\n        addImage(image);\n      });\n      \n      if (galleryElement.querySelectorAll('.gallery-item').length < totalHits) {\n        \n        moreButton(true);\n      } else {\n        \n        moreButton(false);\n        iziToast.info({ message: endMessage });\n      }\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery-link', {\n          captions: true,\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    }\n  } catch (error) {\n    console.error('Error', error);\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction smoothScroll() {\n  if (currentPage > 1) {\n    if (cardHeight === 0) {\n      const firstCard = document.querySelector('.gallery-item');\n      const rect = firstCard.getBoundingClientRect();\n      cardHeight = rect.height;\n    }\n    window.scrollBy({\n      top: cardHeight * 4,\n      behavior: 'smooth',\n    });\n  }\n}"],"names":["apiKey","perPage","searchImages","query","page","url","response","axios","hits","totalHits","error","addImage","image","galleryElement","html","loader","form","loadMoreButton","endMessage","currentPage","searchQuery","cardHeight","lightbox","toggleLoader","show","moreButton","iziToast","performSearch","smoothScroll","total","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAS,qCACTC,EAAU,GAET,eAAeC,EAAaC,EAAOC,EAAM,CAC9C,MAAMC,EAAM,gCAAgCL,CAAM,MAAM,mBACtDG,CACD,CAAA,iEAAiEC,CAAI,aAAaH,CAAO,GAE1F,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAC9B,CAAE,KAAAG,EAAM,UAAAC,GAAcH,EAAS,KACrC,MAAO,CAAE,KAAAE,EAAM,MAAOC,EACvB,OAAQC,EAAO,CACd,cAAQ,MAAM,QAASA,CAAK,EACtBA,CACP,CACH,CCjBO,SAASC,EAASC,EAAO,CAC5B,MAAMC,EAAiB,SAAS,cAAc,UAAU,EAClDC,EAAO;AAAA;AAAA;AAAA,qBAGIF,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAMvBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,uCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,MAKlDC,EAAe,mBAAmB,YAAaC,CAAI,CACvD,CCvBA,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,eAAe,YAAY,EAC3CH,EAAiB,SAAS,cAAc,UAAU,EAClDI,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAa,6DACnB,IAAIC,EAAc,EACdC,EAAc,GACdX,EAAY,EACZY,EAAa,EACbC,EAEJ,SAASC,EAAaC,EAAM,CAC1BT,EAAO,MAAM,QAAUS,EAAO,QAAU,MAC1C,CAEA,SAASC,EAAWD,EAAM,CACxBP,EAAe,MAAM,QAAUO,EAAO,QAAU,MAClD,CAEAR,EAAK,iBAAiB,SAAU,MAAM,GAAK,CAKzC,GAJA,EAAE,eAAc,EAEhBI,EAAc,SAAS,eAAe,aAAa,EAAE,MAAM,OAEvDA,IAAgB,GAAI,CACtBM,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDP,EAAc,EACdI,EAAa,EAAI,EACjB,MAAMI,EAAa,CACrB,CAAC,EAEDV,EAAe,iBAAiB,QAAS,SAAY,CACnDE,IACAI,EAAa,EAAI,EACjB,MAAMI,EAAa,EACnBC,GACF,CAAC,EAED,eAAeD,GAAgB,CAC7B,GAAI,CACF,KAAM,CAAE,KAAAnB,EAAM,MAAAqB,CAAO,EAAG,MAAM3B,EAAakB,EAAaD,CAAW,EAC/DX,EAAK,SAAW,GAClBkB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,6DACjB,CAAO,EAEDb,EAAe,UAAY,GAE3BY,EAAW,EAAK,IAEZN,IAAgB,IAClBN,EAAe,UAAY,GAC3BJ,EAAYoB,EAEZJ,EAAW,EAAK,GAEhBjB,EAAK,QAAQI,GAAS,CACtBD,EAASC,CAAK,CACtB,CAAO,EAEGC,EAAe,iBAAiB,eAAe,EAAE,OAASJ,EAE5DgB,EAAW,EAAI,GAGfA,EAAW,EAAK,EAChBC,EAAS,KAAK,CAAE,QAASR,CAAY,CAAA,GAElCI,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAIQ,EAAe,gBAAiB,CAC7C,SAAU,GACV,aAAc,MACd,aAAc,GACxB,CAAS,EAKN,OAAQpB,EAAO,CACd,QAAQ,MAAM,QAASA,CAAK,CAChC,QAAY,CACRa,EAAa,EAAK,CACnB,CACH,CAEA,SAASK,GAAe,CAClBT,EAAc,IACZE,IAAe,IAGjBA,EAFkB,SAAS,cAAc,eAAe,EACjC,wBACL,QAEpB,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEL"}